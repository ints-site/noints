{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nconst initialState = {\n  items: [],\n  currentNotebook: null,\n  currentSection: null,\n  currentNote: null,\n  isLoading: false,\n  error: null\n};\nconst notebookSlice = createSlice({\n  name: 'notebooks',\n  initialState,\n  reducers: {\n    setNotebooks: (state, action) => {\n      state.items = action.payload;\n    },\n    addNotebook: (state, action) => {\n      state.items.push(action.payload);\n    },\n    setCurrentNotebook: (state, action) => {\n      state.currentNotebook = action.payload;\n    },\n    setCurrentSection: (state, action) => {\n      state.currentSection = action.payload;\n    },\n    setCurrentNote: (state, action) => {\n      state.currentNote = action.payload;\n    },\n    updateNoteContent: (state, action) => {\n      const {\n        id,\n        content\n      } = action.payload;\n      const note = state.items.flatMap(nb => nb.sections).flatMap(s => s.notes).find(n => n.id === id);\n      if (note) {\n        note.content = content;\n        note.updatedAt = new Date();\n      }\n    }\n  }\n});\nexport const {\n  setNotebooks,\n  addNotebook,\n  setCurrentNotebook,\n  setCurrentSection,\n  setCurrentNote,\n  updateNoteContent\n} = notebookSlice.actions;\nexport default notebookSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","items","currentNotebook","currentSection","currentNote","isLoading","error","notebookSlice","name","reducers","setNotebooks","state","action","payload","addNotebook","push","setCurrentNotebook","setCurrentSection","setCurrentNote","updateNoteContent","id","content","note","flatMap","nb","sections","s","notes","find","n","updatedAt","Date","actions","reducer"],"sources":["C:/Users/FanYukin/codes/f/noints/client/src/store/notebookSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { Descendant } from 'slate';\r\nimport { Notebook, Section, Note } from '../types';\r\n\r\ninterface NotebookState {\r\n  items: Notebook[];\r\n  currentNotebook: Notebook | null;\r\n  currentSection: Section | null;\r\n  currentNote: Note | null;\r\n  isLoading: boolean;\r\n  error: string | null;\r\n}\r\n\r\nconst initialState: NotebookState = {\r\n  items: [],\r\n  currentNotebook: null,\r\n  currentSection: null,\r\n  currentNote: null,\r\n  isLoading: false,\r\n  error: null\r\n};\r\n\r\nconst notebookSlice = createSlice({\r\n  name: 'notebooks',\r\n  initialState,\r\n  reducers: {\r\n    setNotebooks: (state, action: PayloadAction<Notebook[]>) => {\r\n      state.items = action.payload;\r\n    },\r\n    addNotebook: (state, action: PayloadAction<Notebook>) => {\r\n      state.items.push(action.payload);\r\n    },\r\n    setCurrentNotebook: (state, action: PayloadAction<Notebook>) => {\r\n      state.currentNotebook = action.payload;\r\n    },\r\n    setCurrentSection: (state, action: PayloadAction<Section>) => {\r\n      state.currentSection = action.payload;\r\n    },\r\n    setCurrentNote: (state, action: PayloadAction<Note>) => {\r\n      state.currentNote = action.payload;\r\n    },\r\n    updateNoteContent: (\r\n      state,\r\n      action: PayloadAction<{ id: string; content: Descendant[] }>\r\n    ) => {\r\n      const { id, content } = action.payload;\r\n      const note = state.items\r\n        .flatMap(nb => nb.sections)\r\n        .flatMap(s => s.notes)\r\n        .find(n => n.id === id);\r\n      \r\n      if (note) {\r\n        note.content = content;\r\n        note.updatedAt = new Date();\r\n      }\r\n    },\r\n  }\r\n});\r\n\r\nexport const { \r\n  setNotebooks, \r\n  addNotebook,\r\n  setCurrentNotebook,\r\n  setCurrentSection,\r\n  setCurrentNote,\r\n  updateNoteContent\r\n} = notebookSlice.actions;\r\n\r\nexport default notebookSlice.reducer; "],"mappings":"AAAA,SAASA,WAAW,QAAuB,kBAAkB;AAa7D,MAAMC,YAA2B,GAAG;EAClCC,KAAK,EAAE,EAAE;EACTC,eAAe,EAAE,IAAI;EACrBC,cAAc,EAAE,IAAI;EACpBC,WAAW,EAAE,IAAI;EACjBC,SAAS,EAAE,KAAK;EAChBC,KAAK,EAAE;AACT,CAAC;AAED,MAAMC,aAAa,GAAGR,WAAW,CAAC;EAChCS,IAAI,EAAE,WAAW;EACjBR,YAAY;EACZS,QAAQ,EAAE;IACRC,YAAY,EAAEA,CAACC,KAAK,EAAEC,MAAiC,KAAK;MAC1DD,KAAK,CAACV,KAAK,GAAGW,MAAM,CAACC,OAAO;IAC9B,CAAC;IACDC,WAAW,EAAEA,CAACH,KAAK,EAAEC,MAA+B,KAAK;MACvDD,KAAK,CAACV,KAAK,CAACc,IAAI,CAACH,MAAM,CAACC,OAAO,CAAC;IAClC,CAAC;IACDG,kBAAkB,EAAEA,CAACL,KAAK,EAAEC,MAA+B,KAAK;MAC9DD,KAAK,CAACT,eAAe,GAAGU,MAAM,CAACC,OAAO;IACxC,CAAC;IACDI,iBAAiB,EAAEA,CAACN,KAAK,EAAEC,MAA8B,KAAK;MAC5DD,KAAK,CAACR,cAAc,GAAGS,MAAM,CAACC,OAAO;IACvC,CAAC;IACDK,cAAc,EAAEA,CAACP,KAAK,EAAEC,MAA2B,KAAK;MACtDD,KAAK,CAACP,WAAW,GAAGQ,MAAM,CAACC,OAAO;IACpC,CAAC;IACDM,iBAAiB,EAAEA,CACjBR,KAAK,EACLC,MAA4D,KACzD;MACH,MAAM;QAAEQ,EAAE;QAAEC;MAAQ,CAAC,GAAGT,MAAM,CAACC,OAAO;MACtC,MAAMS,IAAI,GAAGX,KAAK,CAACV,KAAK,CACrBsB,OAAO,CAACC,EAAE,IAAIA,EAAE,CAACC,QAAQ,CAAC,CAC1BF,OAAO,CAACG,CAAC,IAAIA,CAAC,CAACC,KAAK,CAAC,CACrBC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACT,EAAE,KAAKA,EAAE,CAAC;MAEzB,IAAIE,IAAI,EAAE;QACRA,IAAI,CAACD,OAAO,GAAGA,OAAO;QACtBC,IAAI,CAACQ,SAAS,GAAG,IAAIC,IAAI,CAAC,CAAC;MAC7B;IACF;EACF;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EACXrB,YAAY;EACZI,WAAW;EACXE,kBAAkB;EAClBC,iBAAiB;EACjBC,cAAc;EACdC;AACF,CAAC,GAAGZ,aAAa,CAACyB,OAAO;AAEzB,eAAezB,aAAa,CAAC0B,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}