{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FanYukin\\\\codes\\\\f\\\\noints\\\\client\\\\src\\\\components\\\\Editor\\\\Toolbar.tsx\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useState } from 'react';\nimport { useSlate } from 'slate-react';\nimport { Editor, Element as SlateElement } from 'slate';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Toolbar = ({\n  onExport,\n  onThemeChange\n}) => {\n  _s();\n  const editor = useSlate();\n  const [isDarkMode, setIsDarkMode] = useState(false);\n\n  // 格式化按钮处理函数\n  const toggleFormat = useCallback(format => {\n    const isActive = isFormatActive(format);\n    if (isActive) {\n      Editor.removeMark(editor, format);\n    } else {\n      Editor.addMark(editor, format, true);\n    }\n  }, [editor]);\n\n  // 检查格式是否激活\n  const isFormatActive = format => {\n    const marks = Editor.marks(editor);\n    return marks ? marks[format] === true : false;\n  };\n\n  // 切换列表格式\n  const toggleList = useCallback(type => {\n    const isList = isBlockActive(type);\n    Editor.setNodes(editor, {\n      type: isList ? 'paragraph' : type\n    }, {\n      match: n => SlateElement.isElement(n) && Editor.isBlock(editor, n)\n    });\n  }, [editor]);\n\n  // 检查块级格式是否激活\n  const isBlockActive = type => {\n    const [match] = Editor.nodes(editor, {\n      match: n => SlateElement.isElement(n) && n.type === type\n    });\n    return !!match;\n  };\n\n  // 切换主题\n  const toggleTheme = useCallback(() => {\n    const newMode = !isDarkMode;\n    setIsDarkMode(newMode);\n    onThemeChange === null || onThemeChange === void 0 ? void 0 : onThemeChange(newMode);\n  }, [isDarkMode, onThemeChange]);\n\n  // 格式化按钮组件\n  const FormatButton = ({\n    format,\n    icon,\n    onClick,\n    isActive\n  }) => /*#__PURE__*/_jsxDEV(\"button\", {\n    className: `p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 ${isActive ? 'text-blue-500' : ''}`,\n    onClick: onClick,\n    children: /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"material-icons\",\n      children: icon\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center gap-2 p-2 border-b dark:border-gray-700\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-1\",\n      children: [/*#__PURE__*/_jsxDEV(FormatButton, {\n        format: \"bold\",\n        icon: \"format_bold\",\n        onClick: () => toggleFormat('bold'),\n        isActive: isFormatActive('bold')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormatButton, {\n        format: \"italic\",\n        icon: \"format_italic\",\n        onClick: () => toggleFormat('italic'),\n        isActive: isFormatActive('italic')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormatButton, {\n        format: \"underline\",\n        icon: \"format_underlined\",\n        onClick: () => toggleFormat('underline'),\n        isActive: isFormatActive('underline')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-px bg-gray-300 dark:bg-gray-700 mx-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormatButton, {\n        format: \"bulleted-list\",\n        icon: \"format_list_bulleted\",\n        onClick: () => toggleList('bulleted-list'),\n        isActive: isBlockActive('bulleted-list')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormatButton, {\n        format: \"numbered-list\",\n        icon: \"format_list_numbered\",\n        onClick: () => toggleList('numbered-list'),\n        isActive: isBlockActive('numbered-list')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700\",\n        onClick: () => onExport === null || onExport === void 0 ? void 0 : onExport('txt'),\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"material-icons\",\n          children: \"download\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700\",\n        onClick: toggleTheme,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"material-icons\",\n          children: isDarkMode ? 'light_mode' : 'dark_mode'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n_s(Toolbar, \"ALz40pmcc7wQrnLCxjNMw0ExdYg=\", false, function () {\n  return [useSlate];\n});\n_c = Toolbar;\nexport default Toolbar;\nvar _c;\n$RefreshReg$(_c, \"Toolbar\");","map":{"version":3,"names":["React","useCallback","useState","useSlate","Editor","Element","SlateElement","jsxDEV","_jsxDEV","Toolbar","onExport","onThemeChange","_s","editor","isDarkMode","setIsDarkMode","toggleFormat","format","isActive","isFormatActive","removeMark","addMark","marks","toggleList","type","isList","isBlockActive","setNodes","match","n","isElement","isBlock","nodes","toggleTheme","newMode","FormatButton","icon","onClick","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/FanYukin/codes/f/noints/client/src/components/Editor/Toolbar.tsx"],"sourcesContent":["import React, { useCallback, useState } from 'react';\nimport { useSlate } from 'slate-react';\nimport { Editor, Element as SlateElement } from 'slate';\n\ninterface ToolbarProps {\n  onExport?: (format: 'txt' | 'md' | 'html') => void;\n  onThemeChange?: (isDark: boolean) => void;\n}\n\nconst Toolbar: React.FC<ToolbarProps> = ({ onExport, onThemeChange }) => {\n  const editor = useSlate();\n  const [isDarkMode, setIsDarkMode] = useState(false);\n\n  // 格式化按钮处理函数\n  const toggleFormat = useCallback((format: string) => {\n    const isActive = isFormatActive(format);\n    if (isActive) {\n      Editor.removeMark(editor, format);\n    } else {\n      Editor.addMark(editor, format, true);\n    }\n  }, [editor]);\n\n  // 检查格式是否激活\n  const isFormatActive = (format: string) => {\n    const marks = Editor.marks(editor);\n    return marks ? marks[format] === true : false;\n  };\n\n  // 切换列表格式\n  const toggleList = useCallback((type: 'numbered-list' | 'bulleted-list') => {\n    const isList = isBlockActive(type);\n    \n    Editor.setNodes(\n      editor,\n      { type: isList ? 'paragraph' : type },\n      { match: n => SlateElement.isElement(n) && Editor.isBlock(editor, n) }\n    );\n  }, [editor]);\n\n  // 检查块级格式是否激活\n  const isBlockActive = (type: string) => {\n    const [match] = Editor.nodes(editor, {\n      match: n => SlateElement.isElement(n) && n.type === type,\n    });\n    return !!match;\n  };\n\n  // 切换主题\n  const toggleTheme = useCallback(() => {\n    const newMode = !isDarkMode;\n    setIsDarkMode(newMode);\n    onThemeChange?.(newMode);\n  }, [isDarkMode, onThemeChange]);\n\n  // 格式化按钮组件\n  const FormatButton = ({ format, icon, onClick, isActive }: any) => (\n    <button\n      className={`p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 ${\n        isActive ? 'text-blue-500' : ''\n      }`}\n      onClick={onClick}\n    >\n      <span className=\"material-icons\">{icon}</span>\n    </button>\n  );\n\n  return (\n    <div className=\"flex items-center gap-2 p-2 border-b dark:border-gray-700\">\n      <div className=\"flex gap-1\">\n        <FormatButton\n          format=\"bold\"\n          icon=\"format_bold\"\n          onClick={() => toggleFormat('bold')}\n          isActive={isFormatActive('bold')}\n        />\n        <FormatButton\n          format=\"italic\"\n          icon=\"format_italic\"\n          onClick={() => toggleFormat('italic')}\n          isActive={isFormatActive('italic')}\n        />\n        <FormatButton\n          format=\"underline\"\n          icon=\"format_underlined\"\n          onClick={() => toggleFormat('underline')}\n          isActive={isFormatActive('underline')}\n        />\n        \n        <div className=\"w-px bg-gray-300 dark:bg-gray-700 mx-2\" />\n        \n        <FormatButton\n          format=\"bulleted-list\"\n          icon=\"format_list_bulleted\"\n          onClick={() => toggleList('bulleted-list')}\n          isActive={isBlockActive('bulleted-list')}\n        />\n        <FormatButton\n          format=\"numbered-list\"\n          icon=\"format_list_numbered\"\n          onClick={() => toggleList('numbered-list')}\n          isActive={isBlockActive('numbered-list')}\n        />\n      </div>\n\n      <div className=\"flex-1\" />\n\n      <div className=\"flex gap-2\">\n        <button\n          className=\"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700\"\n          onClick={() => onExport?.('txt')}\n        >\n          <span className=\"material-icons\">download</span>\n        </button>\n        \n        <button\n          className=\"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700\"\n          onClick={toggleTheme}\n        >\n          <span className=\"material-icons\">\n            {isDarkMode ? 'light_mode' : 'dark_mode'}\n          </span>\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Toolbar; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,QAAQ,QAAQ,OAAO;AACpD,SAASC,QAAQ,QAAQ,aAAa;AACtC,SAASC,MAAM,EAAEC,OAAO,IAAIC,YAAY,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAOxD,MAAMC,OAA+B,GAAGA,CAAC;EAAEC,QAAQ;EAAEC;AAAc,CAAC,KAAK;EAAAC,EAAA;EACvE,MAAMC,MAAM,GAAGV,QAAQ,CAAC,CAAC;EACzB,MAAM,CAACW,UAAU,EAAEC,aAAa,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;;EAEnD;EACA,MAAMc,YAAY,GAAGf,WAAW,CAAEgB,MAAc,IAAK;IACnD,MAAMC,QAAQ,GAAGC,cAAc,CAACF,MAAM,CAAC;IACvC,IAAIC,QAAQ,EAAE;MACZd,MAAM,CAACgB,UAAU,CAACP,MAAM,EAAEI,MAAM,CAAC;IACnC,CAAC,MAAM;MACLb,MAAM,CAACiB,OAAO,CAACR,MAAM,EAAEI,MAAM,EAAE,IAAI,CAAC;IACtC;EACF,CAAC,EAAE,CAACJ,MAAM,CAAC,CAAC;;EAEZ;EACA,MAAMM,cAAc,GAAIF,MAAc,IAAK;IACzC,MAAMK,KAAK,GAAGlB,MAAM,CAACkB,KAAK,CAACT,MAAM,CAAC;IAClC,OAAOS,KAAK,GAAGA,KAAK,CAACL,MAAM,CAAC,KAAK,IAAI,GAAG,KAAK;EAC/C,CAAC;;EAED;EACA,MAAMM,UAAU,GAAGtB,WAAW,CAAEuB,IAAuC,IAAK;IAC1E,MAAMC,MAAM,GAAGC,aAAa,CAACF,IAAI,CAAC;IAElCpB,MAAM,CAACuB,QAAQ,CACbd,MAAM,EACN;MAAEW,IAAI,EAAEC,MAAM,GAAG,WAAW,GAAGD;IAAK,CAAC,EACrC;MAAEI,KAAK,EAAEC,CAAC,IAAIvB,YAAY,CAACwB,SAAS,CAACD,CAAC,CAAC,IAAIzB,MAAM,CAAC2B,OAAO,CAAClB,MAAM,EAAEgB,CAAC;IAAE,CACvE,CAAC;EACH,CAAC,EAAE,CAAChB,MAAM,CAAC,CAAC;;EAEZ;EACA,MAAMa,aAAa,GAAIF,IAAY,IAAK;IACtC,MAAM,CAACI,KAAK,CAAC,GAAGxB,MAAM,CAAC4B,KAAK,CAACnB,MAAM,EAAE;MACnCe,KAAK,EAAEC,CAAC,IAAIvB,YAAY,CAACwB,SAAS,CAACD,CAAC,CAAC,IAAIA,CAAC,CAACL,IAAI,KAAKA;IACtD,CAAC,CAAC;IACF,OAAO,CAAC,CAACI,KAAK;EAChB,CAAC;;EAED;EACA,MAAMK,WAAW,GAAGhC,WAAW,CAAC,MAAM;IACpC,MAAMiC,OAAO,GAAG,CAACpB,UAAU;IAC3BC,aAAa,CAACmB,OAAO,CAAC;IACtBvB,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAGuB,OAAO,CAAC;EAC1B,CAAC,EAAE,CAACpB,UAAU,EAAEH,aAAa,CAAC,CAAC;;EAE/B;EACA,MAAMwB,YAAY,GAAGA,CAAC;IAAElB,MAAM;IAAEmB,IAAI;IAAEC,OAAO;IAAEnB;EAAc,CAAC,kBAC5DV,OAAA;IACE8B,SAAS,EAAE,wDACTpB,QAAQ,GAAG,eAAe,GAAG,EAAE,EAC9B;IACHmB,OAAO,EAAEA,OAAQ;IAAAE,QAAA,eAEjB/B,OAAA;MAAM8B,SAAS,EAAC,gBAAgB;MAAAC,QAAA,EAAEH;IAAI;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACxC,CACT;EAED,oBACEnC,OAAA;IAAK8B,SAAS,EAAC,2DAA2D;IAAAC,QAAA,gBACxE/B,OAAA;MAAK8B,SAAS,EAAC,YAAY;MAAAC,QAAA,gBACzB/B,OAAA,CAAC2B,YAAY;QACXlB,MAAM,EAAC,MAAM;QACbmB,IAAI,EAAC,aAAa;QAClBC,OAAO,EAAEA,CAAA,KAAMrB,YAAY,CAAC,MAAM,CAAE;QACpCE,QAAQ,EAAEC,cAAc,CAAC,MAAM;MAAE;QAAAqB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClC,CAAC,eACFnC,OAAA,CAAC2B,YAAY;QACXlB,MAAM,EAAC,QAAQ;QACfmB,IAAI,EAAC,eAAe;QACpBC,OAAO,EAAEA,CAAA,KAAMrB,YAAY,CAAC,QAAQ,CAAE;QACtCE,QAAQ,EAAEC,cAAc,CAAC,QAAQ;MAAE;QAAAqB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpC,CAAC,eACFnC,OAAA,CAAC2B,YAAY;QACXlB,MAAM,EAAC,WAAW;QAClBmB,IAAI,EAAC,mBAAmB;QACxBC,OAAO,EAAEA,CAAA,KAAMrB,YAAY,CAAC,WAAW,CAAE;QACzCE,QAAQ,EAAEC,cAAc,CAAC,WAAW;MAAE;QAAAqB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvC,CAAC,eAEFnC,OAAA;QAAK8B,SAAS,EAAC;MAAwC;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAE1DnC,OAAA,CAAC2B,YAAY;QACXlB,MAAM,EAAC,eAAe;QACtBmB,IAAI,EAAC,sBAAsB;QAC3BC,OAAO,EAAEA,CAAA,KAAMd,UAAU,CAAC,eAAe,CAAE;QAC3CL,QAAQ,EAAEQ,aAAa,CAAC,eAAe;MAAE;QAAAc,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1C,CAAC,eACFnC,OAAA,CAAC2B,YAAY;QACXlB,MAAM,EAAC,eAAe;QACtBmB,IAAI,EAAC,sBAAsB;QAC3BC,OAAO,EAAEA,CAAA,KAAMd,UAAU,CAAC,eAAe,CAAE;QAC3CL,QAAQ,EAAEQ,aAAa,CAAC,eAAe;MAAE;QAAAc,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1C,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eAENnC,OAAA;MAAK8B,SAAS,EAAC;IAAQ;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAE1BnC,OAAA;MAAK8B,SAAS,EAAC,YAAY;MAAAC,QAAA,gBACzB/B,OAAA;QACE8B,SAAS,EAAC,sDAAsD;QAChED,OAAO,EAAEA,CAAA,KAAM3B,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAG,KAAK,CAAE;QAAA6B,QAAA,eAEjC/B,OAAA;UAAM8B,SAAS,EAAC,gBAAgB;UAAAC,QAAA,EAAC;QAAQ;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1C,CAAC,eAETnC,OAAA;QACE8B,SAAS,EAAC,sDAAsD;QAChED,OAAO,EAAEJ,WAAY;QAAAM,QAAA,eAErB/B,OAAA;UAAM8B,SAAS,EAAC,gBAAgB;UAAAC,QAAA,EAC7BzB,UAAU,GAAG,YAAY,GAAG;QAAW;UAAA0B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC/B,EAAA,CArHIH,OAA+B;EAAA,QACpBN,QAAQ;AAAA;AAAAyC,EAAA,GADnBnC,OAA+B;AAuHrC,eAAeA,OAAO;AAAC,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}