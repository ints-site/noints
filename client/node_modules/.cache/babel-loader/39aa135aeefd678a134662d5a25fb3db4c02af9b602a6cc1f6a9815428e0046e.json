{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { updateNoteContent } from '../store/notebookSlice';\nexport const useAutoSave = (noteId, content, delay = 2000, onSave) => {\n  _s();\n  const dispatch = useDispatch();\n  const timeoutRef = useRef();\n  useEffect(() => {\n    if (!noteId) return;\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n    timeoutRef.current = setTimeout(() => {\n      dispatch(updateNoteContent({\n        id: noteId,\n        content\n      }));\n      onSave === null || onSave === void 0 ? void 0 : onSave();\n    }, delay);\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [content, noteId, delay, dispatch, onSave]);\n};\n_s(useAutoSave, \"XupA58vxTufrOenhRBZyZm5irgw=\", false, function () {\n  return [useDispatch];\n});","map":{"version":3,"names":["useEffect","useRef","useDispatch","updateNoteContent","useAutoSave","noteId","content","delay","onSave","_s","dispatch","timeoutRef","current","clearTimeout","setTimeout","id"],"sources":["C:/Users/FanYukin/codes/f/noints/client/src/hooks/useAutoSave.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\r\nimport { Descendant } from 'slate';\r\nimport { useDispatch } from 'react-redux';\r\nimport { updateNoteContent } from '../store/notebookSlice';\r\n\r\nexport const useAutoSave = (\r\n  noteId: string | null,\r\n  content: Descendant[],\r\n  delay: number = 2000,\r\n  onSave?: () => void\r\n) => {\r\n  const dispatch = useDispatch();\r\n  const timeoutRef = useRef<NodeJS.Timeout>();\r\n\r\n  useEffect(() => {\r\n    if (!noteId) return;\r\n\r\n    if (timeoutRef.current) {\r\n      clearTimeout(timeoutRef.current);\r\n    }\r\n\r\n    timeoutRef.current = setTimeout(() => {\r\n      dispatch(updateNoteContent({ id: noteId, content }));\r\n      onSave?.();\r\n    }, delay);\r\n\r\n    return () => {\r\n      if (timeoutRef.current) {\r\n        clearTimeout(timeoutRef.current);\r\n      }\r\n    };\r\n  }, [content, noteId, delay, dispatch, onSave]);\r\n}; "],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAEzC,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,iBAAiB,QAAQ,wBAAwB;AAE1D,OAAO,MAAMC,WAAW,GAAGA,CACzBC,MAAqB,EACrBC,OAAqB,EACrBC,KAAa,GAAG,IAAI,EACpBC,MAAmB,KAChB;EAAAC,EAAA;EACH,MAAMC,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAC9B,MAAMS,UAAU,GAAGV,MAAM,CAAiB,CAAC;EAE3CD,SAAS,CAAC,MAAM;IACd,IAAI,CAACK,MAAM,EAAE;IAEb,IAAIM,UAAU,CAACC,OAAO,EAAE;MACtBC,YAAY,CAACF,UAAU,CAACC,OAAO,CAAC;IAClC;IAEAD,UAAU,CAACC,OAAO,GAAGE,UAAU,CAAC,MAAM;MACpCJ,QAAQ,CAACP,iBAAiB,CAAC;QAAEY,EAAE,EAAEV,MAAM;QAAEC;MAAQ,CAAC,CAAC,CAAC;MACpDE,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAG,CAAC;IACZ,CAAC,EAAED,KAAK,CAAC;IAET,OAAO,MAAM;MACX,IAAII,UAAU,CAACC,OAAO,EAAE;QACtBC,YAAY,CAACF,UAAU,CAACC,OAAO,CAAC;MAClC;IACF,CAAC;EACH,CAAC,EAAE,CAACN,OAAO,EAAED,MAAM,EAAEE,KAAK,EAAEG,QAAQ,EAAEF,MAAM,CAAC,CAAC;AAChD,CAAC;AAACC,EAAA,CA3BWL,WAAW;EAAA,QAMLF,WAAW;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}