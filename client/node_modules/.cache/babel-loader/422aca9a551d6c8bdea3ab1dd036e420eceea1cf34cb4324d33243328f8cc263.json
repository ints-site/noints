{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FanYukin\\\\codes\\\\f\\\\noints\\\\client\\\\src\\\\components\\\\Editor\\\\NoteEditor.tsx\",\n  _s = $RefreshSig$();\nimport React, { useMemo, useState, useCallback } from 'react';\nimport { createEditor, Node as SlateNode } from 'slate';\nimport { Slate, Editable, withReact } from 'slate-react';\nimport { withHistory } from 'slate-history';\nimport { useAutoSave } from '../../hooks/useAutoSave';\nimport Toolbar from './Toolbar';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst NoteEditor = ({\n  noteId\n}) => {\n  _s();\n  const editor = useMemo(() => {\n    const e = withHistory(withReact(createEditor()));\n\n    // 添加规范化规则\n    const {\n      normalizeNode\n    } = e;\n    e.normalizeNode = ([node, path]) => {\n      if (!Element.isElement(node) || node.type !== undefined) {\n        return normalizeNode([node, path]);\n      }\n\n      // 确保所有顶级节点都有类型\n      Transforms.setNodes(e, {\n        type: 'paragraph'\n      }, {\n        at: path\n      });\n    };\n    return e;\n  }, []);\n  const [value, setValue] = useState([{\n    type: 'paragraph',\n    children: [{\n      text: '',\n      bold: false,\n      italic: false,\n      underline: false\n    }]\n  }]);\n  const [saveStatus, setSaveStatus] = useState('saved');\n  const [wordCount, setWordCount] = useState(0);\n\n  // 使用自动保存 hook\n  useAutoSave(noteId || null, value, 2000, () => {\n    setSaveStatus('saving');\n    setTimeout(() => setSaveStatus('saved'), 1000);\n  });\n\n  // 渲染元素\n  const renderElement = useCallback(props => {\n    switch (props.element.type) {\n      case 'bulleted-list':\n        return /*#__PURE__*/_jsxDEV(\"ul\", {\n          ...props.attributes,\n          children: props.children\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 16\n        }, this);\n      case 'numbered-list':\n        return /*#__PURE__*/_jsxDEV(\"ol\", {\n          ...props.attributes,\n          children: props.children\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          ...props.attributes,\n          children: props.children\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 16\n        }, this);\n    }\n  }, []);\n\n  // 渲染叶子节点\n  const renderLeaf = useCallback(props => {\n    let {\n      children\n    } = props;\n    if (props.leaf.bold) {\n      children = /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 18\n      }, this);\n    }\n    if (props.leaf.italic) {\n      children = /*#__PURE__*/_jsxDEV(\"em\", {\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 18\n      }, this);\n    }\n    if (props.leaf.underline) {\n      children = /*#__PURE__*/_jsxDEV(\"u\", {\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 18\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      ...props.attributes,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 12\n    }, this);\n  }, []);\n\n  // 计算字数\n  const calculateWordCount = useCallback(value => {\n    const text = value.map(n => SlateNode.string(n)).join('\\n').trim();\n\n    // 检查是否包含CJK字符\n    const hasCJK = /[\\u4e00-\\u9fff\\u3400-\\u4dbf]/.test(text);\n    if (hasCJK) {\n      // 如果包含CJK字符，直接计算字符数（排除空格和换行符）\n      return text.replace(/\\s+/g, '').length;\n    } else {\n      // 如果是纯英文，按空格分词\n      return text.split(/\\s+/).filter(Boolean).length;\n    }\n  }, []);\n\n  // 修改导出函数，使filename参数可选\n  const handleExport = useCallback((format, filename) => {\n    const text = value.map(n => SlateNode.string(n)).join('\\n');\n    const blob = new Blob([text], {\n      type: 'text/plain;charset=utf-8'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    // 如果没有提供文件名，使用默认文件名\n    a.download = filename || `note.${format}`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  }, [value]);\n\n  // 处理快捷键\n  const handleKeyDown = useCallback(event => {\n    if (!event.ctrlKey) return;\n    switch (event.key) {\n      case 'b':\n        {\n          event.preventDefault();\n          editor.addMark('bold', true);\n          break;\n        }\n      case 'i':\n        {\n          event.preventDefault();\n          editor.addMark('italic', true);\n          break;\n        }\n      case 'u':\n        {\n          event.preventDefault();\n          editor.addMark('underline', true);\n          break;\n        }\n      case 'z':\n        {\n          event.preventDefault();\n          if (event.shiftKey) {\n            editor.redo();\n          } else {\n            editor.undo();\n          }\n          break;\n        }\n      case 'y':\n        {\n          event.preventDefault();\n          editor.redo();\n          break;\n        }\n    }\n  }, [editor]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-full flex flex-col\",\n    children: /*#__PURE__*/_jsxDEV(Slate, {\n      editor: editor,\n      value: value,\n      onChange: newValue => {\n        setValue(newValue);\n        setWordCount(calculateWordCount(newValue));\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border-b flex items-center justify-between px-4 py-2\",\n        children: [/*#__PURE__*/_jsxDEV(Toolbar, {\n          onExport: handleExport\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500 flex items-center gap-1\",\n            children: [saveStatus === 'saving' && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"material-icons animate-spin text-blue-500\",\n                children: \"sync\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 19\n              }, this), \"Saving...\"]\n            }, void 0, true), saveStatus === 'saved' && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"material-icons text-green-500\",\n                children: \"check\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 19\n              }, this), \"Saved\"]\n            }, void 0, true), saveStatus === 'error' && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"material-icons text-red-500\",\n                children: \"error\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 19\n              }, this), \"Error saving\"]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500\",\n            children: [wordCount, \" \", wordCount === 1 ? 'word' : 'words']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 p-6 overflow-auto\",\n        children: /*#__PURE__*/_jsxDEV(Editable, {\n          className: \"h-full outline-none prose max-w-none\",\n          renderElement: renderElement,\n          renderLeaf: renderLeaf,\n          placeholder: \"Start typing...\",\n          onKeyDown: handleKeyDown,\n          spellCheck: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 5\n  }, this);\n};\n_s(NoteEditor, \"HKLOLcLnMi3wKfPfsQ6uqzEobUM=\", false, function () {\n  return [useAutoSave];\n});\n_c = NoteEditor;\nexport default NoteEditor;\nvar _c;\n$RefreshReg$(_c, \"NoteEditor\");","map":{"version":3,"names":["React","useMemo","useState","useCallback","createEditor","Node","SlateNode","Slate","Editable","withReact","withHistory","useAutoSave","Toolbar","jsxDEV","_jsxDEV","Fragment","_Fragment","NoteEditor","noteId","_s","editor","e","normalizeNode","node","path","Element","isElement","type","undefined","Transforms","setNodes","at","value","setValue","children","text","bold","italic","underline","saveStatus","setSaveStatus","wordCount","setWordCount","setTimeout","renderElement","props","element","attributes","fileName","_jsxFileName","lineNumber","columnNumber","renderLeaf","leaf","calculateWordCount","map","n","string","join","trim","hasCJK","test","replace","length","split","filter","Boolean","handleExport","format","filename","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","handleKeyDown","event","ctrlKey","key","preventDefault","addMark","shiftKey","redo","undo","className","onChange","newValue","onExport","placeholder","onKeyDown","spellCheck","_c","$RefreshReg$"],"sources":["C:/Users/FanYukin/codes/f/noints/client/src/components/Editor/NoteEditor.tsx"],"sourcesContent":["import React, { useMemo, useState, useCallback } from 'react';\nimport { createEditor, Descendant, Editor, Node as SlateNode } from 'slate';\nimport { Slate, Editable, withReact } from 'slate-react';\nimport { withHistory } from 'slate-history';\nimport { useAutoSave } from '../../hooks/useAutoSave';\nimport Toolbar from './Toolbar';\nimport { CustomElement, CustomText } from './types';\n\ninterface EditorProps {\n  noteId?: string;\n}\n\nconst NoteEditor: React.FC<EditorProps> = ({ noteId }) => {\n  const editor = useMemo(() => {\n    const e = withHistory(withReact(createEditor()));\n    \n    // 添加规范化规则\n    const { normalizeNode } = e;\n    e.normalizeNode = ([node, path]) => {\n      if (!Element.isElement(node) || node.type !== undefined) {\n        return normalizeNode([node, path]);\n      }\n\n      // 确保所有顶级节点都有类型\n      Transforms.setNodes(\n        e,\n        { type: 'paragraph' },\n        { at: path }\n      );\n    };\n    \n    return e;\n  }, []);\n  const [value, setValue] = useState<Descendant[]>([\n    {\n      type: 'paragraph' as const,\n      children: [\n        { \n          text: '',\n          bold: false,\n          italic: false,\n          underline: false\n        }\n      ],\n    },\n  ]);\n  const [saveStatus, setSaveStatus] = useState<'saved' | 'saving' | 'error'>('saved');\n  const [wordCount, setWordCount] = useState(0);\n\n  // 使用自动保存 hook\n  useAutoSave(noteId || null, value, 2000, () => {\n    setSaveStatus('saving');\n    setTimeout(() => setSaveStatus('saved'), 1000);\n  });\n\n  // 渲染元素\n  const renderElement = useCallback((props: {\n    element: CustomElement;\n    children: React.ReactNode;\n    attributes: any;\n  }) => {\n    switch (props.element.type) {\n      case 'bulleted-list':\n        return <ul {...props.attributes}>{props.children}</ul>;\n      case 'numbered-list':\n        return <ol {...props.attributes}>{props.children}</ol>;\n      default:\n        return <p {...props.attributes}>{props.children}</p>;\n    }\n  }, []);\n\n  // 渲染叶子节点\n  const renderLeaf = useCallback((props: {\n    leaf: CustomText;\n    children: React.ReactNode;\n    attributes: any;\n  }) => {\n    let { children } = props;\n    \n    if (props.leaf.bold) {\n      children = <strong>{children}</strong>;\n    }\n    if (props.leaf.italic) {\n      children = <em>{children}</em>;\n    }\n    if (props.leaf.underline) {\n      children = <u>{children}</u>;\n    }\n    \n    return <span {...props.attributes}>{children}</span>;\n  }, []);\n\n  // 计算字数\n  const calculateWordCount = useCallback((value: Descendant[]) => {\n    const text = value\n      .map(n => SlateNode.string(n))\n      .join('\\n')\n      .trim();\n    \n    // 检查是否包含CJK字符\n    const hasCJK = /[\\u4e00-\\u9fff\\u3400-\\u4dbf]/.test(text);\n    \n    if (hasCJK) {\n      // 如果包含CJK字符，直接计算字符数（排除空格和换行符）\n      return text.replace(/\\s+/g, '').length;\n    } else {\n      // 如果是纯英文，按空格分词\n      return text.split(/\\s+/).filter(Boolean).length;\n    }\n  }, []);\n\n  // 修改导出函数，使filename参数可选\n  const handleExport = useCallback((format: 'txt' | 'md' | 'html', filename?: string) => {\n    const text = value.map(n => SlateNode.string(n)).join('\\n');\n    const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    // 如果没有提供文件名，使用默认文件名\n    a.download = filename || `note.${format}`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  }, [value]);\n\n  // 处理快捷键\n  const handleKeyDown = useCallback((event: React.KeyboardEvent) => {\n    if (!event.ctrlKey) return;\n\n    switch (event.key) {\n      case 'b': {\n        event.preventDefault();\n        editor.addMark('bold', true);\n        break;\n      }\n      case 'i': {\n        event.preventDefault();\n        editor.addMark('italic', true);\n        break;\n      }\n      case 'u': {\n        event.preventDefault();\n        editor.addMark('underline', true);\n        break;\n      }\n      case 'z': {\n        event.preventDefault();\n        if (event.shiftKey) {\n          editor.redo();\n        } else {\n          editor.undo();\n        }\n        break;\n      }\n      case 'y': {\n        event.preventDefault();\n        editor.redo();\n        break;\n      }\n    }\n  }, [editor]);\n\n  return (\n    <div className=\"h-full flex flex-col\">\n      <Slate\n        editor={editor}\n        value={value}\n        onChange={newValue => {\n          setValue(newValue);\n          setWordCount(calculateWordCount(newValue));\n        }}\n      >\n        <div className=\"border-b flex items-center justify-between px-4 py-2\">\n          <Toolbar onExport={handleExport} />\n          <div className=\"flex items-center gap-4\">\n            {/* 保存状态指示器 */}\n            <div className=\"text-sm text-gray-500 flex items-center gap-1\">\n              {saveStatus === 'saving' && (\n                <>\n                  <span className=\"material-icons animate-spin text-blue-500\">sync</span>\n                  Saving...\n                </>\n              )}\n              {saveStatus === 'saved' && (\n                <>\n                  <span className=\"material-icons text-green-500\">check</span>\n                  Saved\n                </>\n              )}\n              {saveStatus === 'error' && (\n                <>\n                  <span className=\"material-icons text-red-500\">error</span>\n                  Error saving\n                </>\n              )}\n            </div>\n            {/* 字数统计 */}\n            <div className=\"text-sm text-gray-500\">\n              {wordCount} {wordCount === 1 ? 'word' : 'words'}\n            </div>\n          </div>\n        </div>\n        <div className=\"flex-1 p-6 overflow-auto\">\n          <Editable\n            className=\"h-full outline-none prose max-w-none\"\n            renderElement={renderElement}\n            renderLeaf={renderLeaf}\n            placeholder=\"Start typing...\"\n            onKeyDown={handleKeyDown}\n            spellCheck={false}\n          />\n        </div>\n      </Slate>\n    </div>\n  );\n};\n\nexport default NoteEditor; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}