{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { updateNoteContent } from '../store/notebookSlice';\nexport const useAutoSave = (noteId, content, delay = 2000) => {\n  _s();\n  const dispatch = useDispatch();\n  const timeoutRef = useRef();\n  useEffect(() => {\n    if (!noteId) return;\n\n    // 清除之前的定时器\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n\n    // 设置新的定时器\n    timeoutRef.current = setTimeout(() => {\n      dispatch(updateNoteContent({\n        id: noteId,\n        content\n      }));\n      console.log('Auto-saved note:', noteId);\n    }, delay);\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [content, noteId, delay, dispatch]);\n};\n_s(useAutoSave, \"XupA58vxTufrOenhRBZyZm5irgw=\", false, function () {\n  return [useDispatch];\n});","map":{"version":3,"names":["useEffect","useRef","useDispatch","updateNoteContent","useAutoSave","noteId","content","delay","_s","dispatch","timeoutRef","current","clearTimeout","setTimeout","id","console","log"],"sources":["C:/Users/FanYukin/codes/f/noints/client/src/hooks/useAutoSave.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\r\nimport { Descendant } from 'slate';\r\nimport { useDispatch } from 'react-redux';\r\nimport { updateNoteContent } from '../store/notebookSlice';\r\n\r\nexport const useAutoSave = (\r\n  noteId: string | null,\r\n  content: Descendant[],\r\n  delay: number = 2000\r\n) => {\r\n  const dispatch = useDispatch();\r\n  const timeoutRef = useRef<NodeJS.Timeout>();\r\n\r\n  useEffect(() => {\r\n    if (!noteId) return;\r\n\r\n    // 清除之前的定时器\r\n    if (timeoutRef.current) {\r\n      clearTimeout(timeoutRef.current);\r\n    }\r\n\r\n    // 设置新的定时器\r\n    timeoutRef.current = setTimeout(() => {\r\n      dispatch(updateNoteContent({ id: noteId, content }));\r\n      console.log('Auto-saved note:', noteId);\r\n    }, delay);\r\n\r\n    return () => {\r\n      if (timeoutRef.current) {\r\n        clearTimeout(timeoutRef.current);\r\n      }\r\n    };\r\n  }, [content, noteId, delay, dispatch]);\r\n}; "],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAEzC,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,iBAAiB,QAAQ,wBAAwB;AAE1D,OAAO,MAAMC,WAAW,GAAGA,CACzBC,MAAqB,EACrBC,OAAqB,EACrBC,KAAa,GAAG,IAAI,KACjB;EAAAC,EAAA;EACH,MAAMC,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9B,MAAMQ,UAAU,GAAGT,MAAM,CAAiB,CAAC;EAE3CD,SAAS,CAAC,MAAM;IACd,IAAI,CAACK,MAAM,EAAE;;IAEb;IACA,IAAIK,UAAU,CAACC,OAAO,EAAE;MACtBC,YAAY,CAACF,UAAU,CAACC,OAAO,CAAC;IAClC;;IAEA;IACAD,UAAU,CAACC,OAAO,GAAGE,UAAU,CAAC,MAAM;MACpCJ,QAAQ,CAACN,iBAAiB,CAAC;QAAEW,EAAE,EAAET,MAAM;QAAEC;MAAQ,CAAC,CAAC,CAAC;MACpDS,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEX,MAAM,CAAC;IACzC,CAAC,EAAEE,KAAK,CAAC;IAET,OAAO,MAAM;MACX,IAAIG,UAAU,CAACC,OAAO,EAAE;QACtBC,YAAY,CAACF,UAAU,CAACC,OAAO,CAAC;MAClC;IACF,CAAC;EACH,CAAC,EAAE,CAACL,OAAO,EAAED,MAAM,EAAEE,KAAK,EAAEE,QAAQ,CAAC,CAAC;AACxC,CAAC;AAACD,EAAA,CA5BWJ,WAAW;EAAA,QAKLF,WAAW;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}