{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FanYukin\\\\codes\\\\f\\\\noints\\\\client\\\\src\\\\components\\\\Editor\\\\NoteEditor.tsx\",\n  _s = $RefreshSig$();\nimport React, { useMemo, useState, useCallback } from 'react';\nimport { createEditor, Node as SlateNode } from 'slate';\nimport { Slate, Editable, withReact } from 'slate-react';\nimport { withHistory } from 'slate-history';\nimport { useAutoSave } from '../../hooks/useAutoSave';\nimport Toolbar from './Toolbar';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst NoteEditor = ({\n  noteId\n}) => {\n  _s();\n  const editor = useMemo(() => withHistory(withReact(createEditor())), []);\n  const [value, setValue] = useState([{\n    type: 'paragraph',\n    children: [{\n      text: ''\n    }]\n  }]);\n  const [saveStatus, setSaveStatus] = useState('saved');\n  const [wordCount, setWordCount] = useState(0);\n\n  // 使用自动保存 hook\n  useAutoSave(noteId || null, value, 2000, () => {\n    setSaveStatus('saving');\n    setTimeout(() => setSaveStatus('saved'), 1000);\n  });\n\n  // 渲染元素\n  const renderElement = useCallback(props => {\n    switch (props.element.type) {\n      case 'bulleted-list':\n        return /*#__PURE__*/_jsxDEV(\"ul\", {\n          ...props.attributes,\n          children: props.children\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 16\n        }, this);\n      case 'numbered-list':\n        return /*#__PURE__*/_jsxDEV(\"ol\", {\n          ...props.attributes,\n          children: props.children\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          ...props.attributes,\n          children: props.children\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 16\n        }, this);\n    }\n  }, []);\n\n  // 渲染叶子节点\n  const renderLeaf = useCallback(props => {\n    let {\n      children\n    } = props;\n    if (props.leaf.bold) {\n      children = /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 18\n      }, this);\n    }\n    if (props.leaf.italic) {\n      children = /*#__PURE__*/_jsxDEV(\"em\", {\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 18\n      }, this);\n    }\n    if (props.leaf.underline) {\n      children = /*#__PURE__*/_jsxDEV(\"u\", {\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 18\n      }, this);\n    }\n\n    // 添加背景色样式\n    const style = {};\n    if (props.leaf.backgroundColor) {\n      style.backgroundColor = props.leaf.backgroundColor;\n    }\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      ...props.attributes,\n      style: style,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this);\n  }, []);\n\n  // 修改计算字数的函数\n  const calculateWordCount = useCallback(value => {\n    const text = value.map(n => SlateNode.string(n)).join('\\n').trim();\n    if (!text) return 0;\n\n    // 分别计算中文和英文字数\n    const cjkCount = (text.match(/[\\u4e00-\\u9fff\\u3400-\\u4dbf]/g) || []).length;\n    const englishWords = text.replace(/[\\u4e00-\\u9fff\\u3400-\\u4dbf]/g, '') // 移除中文字符\n    .trim().split(/\\s+/).filter(Boolean).length;\n\n    // 中文字符算一个字，英文单词算一个字\n    return cjkCount + englishWords;\n  }, []);\n\n  // 修改导出函数，使filename参数可选\n  const handleExport = useCallback((format, filename) => {\n    const text = value.map(n => SlateNode.string(n)).join('\\n');\n    const blob = new Blob([text], {\n      type: 'text/plain;charset=utf-8'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    // 如果没有提供文件名，使用默认文件名\n    a.download = filename || `note.${format}`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  }, [value]);\n\n  // 理快捷键\n  const handleKeyDown = useCallback(event => {\n    if (!event.ctrlKey) return;\n    switch (event.key) {\n      case 'b':\n        {\n          event.preventDefault();\n          editor.addMark('bold', true);\n          break;\n        }\n      case 'i':\n        {\n          event.preventDefault();\n          editor.addMark('italic', true);\n          break;\n        }\n      case 'u':\n        {\n          event.preventDefault();\n          editor.addMark('underline', true);\n          break;\n        }\n      case 'z':\n        {\n          event.preventDefault();\n          if (event.shiftKey) {\n            editor.redo();\n          } else {\n            editor.undo();\n          }\n          break;\n        }\n      case 'y':\n        {\n          event.preventDefault();\n          editor.redo();\n          break;\n        }\n    }\n  }, [editor]);\n\n  // 添加主题切换处理\n  const handleThemeChange = useCallback(isDark => {\n    // 可以在这里添加更多的主题相关逻辑\n    const editorElement = document.querySelector('.editor-content');\n    if (editorElement) {\n      editorElement.classList.toggle('dark', isDark);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-full flex flex-col\",\n    children: /*#__PURE__*/_jsxDEV(Slate, {\n      editor: editor,\n      value: value,\n      onChange: newValue => {\n        setValue(newValue);\n        const count = calculateWordCount(newValue);\n        setWordCount(count);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border-b flex items-center justify-between px-4 py-2\",\n        children: [/*#__PURE__*/_jsxDEV(Toolbar, {\n          onExport: handleExport,\n          onThemeChange: handleThemeChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500 flex items-center gap-1\",\n            children: [saveStatus === 'saving' && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"material-icons animate-spin text-blue-500\",\n                children: \"sync\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 19\n              }, this), \"Saving...\"]\n            }, void 0, true), saveStatus === 'saved' && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"material-icons text-green-500\",\n                children: \"check\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 19\n              }, this), \"Saved\"]\n            }, void 0, true), saveStatus === 'error' && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"material-icons text-red-500\",\n                children: \"error\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 19\n              }, this), \"Error saving\"]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500\",\n            children: [wordCount, \" \", wordCount === 1 ? 'character' : 'characters']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 p-6 overflow-auto editor-content\",\n        children: /*#__PURE__*/_jsxDEV(Editable, {\n          className: \"h-full outline-none prose max-w-none dark:prose-invert\",\n          renderElement: renderElement,\n          renderLeaf: renderLeaf,\n          placeholder: \"Start typing...\",\n          onKeyDown: handleKeyDown,\n          spellCheck: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 167,\n    columnNumber: 5\n  }, this);\n};\n_s(NoteEditor, \"4MrTBkTPwZvZKCh9j0fMb1cQA5g=\", false, function () {\n  return [useAutoSave];\n});\n_c = NoteEditor;\nexport default NoteEditor;\nvar _c;\n$RefreshReg$(_c, \"NoteEditor\");","map":{"version":3,"names":["React","useMemo","useState","useCallback","createEditor","Node","SlateNode","Slate","Editable","withReact","withHistory","useAutoSave","Toolbar","jsxDEV","_jsxDEV","Fragment","_Fragment","NoteEditor","noteId","_s","editor","value","setValue","type","children","text","saveStatus","setSaveStatus","wordCount","setWordCount","setTimeout","renderElement","props","element","attributes","fileName","_jsxFileName","lineNumber","columnNumber","renderLeaf","leaf","bold","italic","underline","style","backgroundColor","calculateWordCount","map","n","string","join","trim","cjkCount","match","length","englishWords","replace","split","filter","Boolean","handleExport","format","filename","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","handleKeyDown","event","ctrlKey","key","preventDefault","addMark","shiftKey","redo","undo","handleThemeChange","isDark","editorElement","querySelector","classList","toggle","className","onChange","newValue","count","onExport","onThemeChange","placeholder","onKeyDown","spellCheck","_c","$RefreshReg$"],"sources":["C:/Users/FanYukin/codes/f/noints/client/src/components/Editor/NoteEditor.tsx"],"sourcesContent":["import React, { useMemo, useState, useCallback } from 'react';\nimport { \n  createEditor, \n  Descendant, \n  Editor, \n  Element as SlateElement,\n  Node as SlateNode,\n  Transforms\n} from 'slate';\nimport { Slate, Editable, withReact } from 'slate-react';\nimport { withHistory } from 'slate-history';\nimport { useAutoSave } from '../../hooks/useAutoSave';\nimport Toolbar from './Toolbar';\nimport { CustomElement, CustomText } from './types';\n\ninterface EditorProps {\n  noteId?: string;\n}\n\nconst NoteEditor: React.FC<EditorProps> = ({ noteId }) => {\n  const editor = useMemo(() => withHistory(withReact(createEditor())), []);\n  const [value, setValue] = useState<Descendant[]>([\n    {\n      type: 'paragraph',\n      children: [{ text: '' }]\n    }\n  ]);\n  const [saveStatus, setSaveStatus] = useState<'saved' | 'saving' | 'error'>('saved');\n  const [wordCount, setWordCount] = useState(0);\n\n  // 使用自动保存 hook\n  useAutoSave(noteId || null, value, 2000, () => {\n    setSaveStatus('saving');\n    setTimeout(() => setSaveStatus('saved'), 1000);\n  });\n\n  // 渲染元素\n  const renderElement = useCallback((props: {\n    element: CustomElement;\n    children: React.ReactNode;\n    attributes: any;\n  }) => {\n    switch (props.element.type) {\n      case 'bulleted-list':\n        return <ul {...props.attributes}>{props.children}</ul>;\n      case 'numbered-list':\n        return <ol {...props.attributes}>{props.children}</ol>;\n      default:\n        return <p {...props.attributes}>{props.children}</p>;\n    }\n  }, []);\n\n  // 渲染叶子节点\n  const renderLeaf = useCallback((props: {\n    leaf: CustomText;\n    children: React.ReactNode;\n    attributes: any;\n  }) => {\n    let { children } = props;\n    \n    if (props.leaf.bold) {\n      children = <strong>{children}</strong>;\n    }\n    if (props.leaf.italic) {\n      children = <em>{children}</em>;\n    }\n    if (props.leaf.underline) {\n      children = <u>{children}</u>;\n    }\n    \n    // 添加背景色样式\n    const style: React.CSSProperties = {};\n    if (props.leaf.backgroundColor) {\n      style.backgroundColor = props.leaf.backgroundColor;\n    }\n    \n    return (\n      <span {...props.attributes} style={style}>\n        {children}\n      </span>\n    );\n  }, []);\n\n  // 修改计算字数的函数\n  const calculateWordCount = useCallback((value: Descendant[]) => {\n    const text = value\n      .map(n => SlateNode.string(n))\n      .join('\\n')\n      .trim();\n    \n    if (!text) return 0;\n    \n    // 分别计算中文和英文字数\n    const cjkCount = (text.match(/[\\u4e00-\\u9fff\\u3400-\\u4dbf]/g) || []).length;\n    const englishWords = text\n      .replace(/[\\u4e00-\\u9fff\\u3400-\\u4dbf]/g, '') // 移除中文字符\n      .trim()\n      .split(/\\s+/)\n      .filter(Boolean).length;\n    \n    // 中文字符算一个字，英文单词算一个字\n    return cjkCount + englishWords;\n  }, []);\n\n  // 修改导出函数，使filename参数可选\n  const handleExport = useCallback((format: 'txt' | 'md' | 'html', filename?: string) => {\n    const text = value.map(n => SlateNode.string(n)).join('\\n');\n    const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    // 如果没有提供文件名，使用默认文件名\n    a.download = filename || `note.${format}`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  }, [value]);\n\n  // 理快捷键\n  const handleKeyDown = useCallback((event: React.KeyboardEvent) => {\n    if (!event.ctrlKey) return;\n\n    switch (event.key) {\n      case 'b': {\n        event.preventDefault();\n        editor.addMark('bold', true);\n        break;\n      }\n      case 'i': {\n        event.preventDefault();\n        editor.addMark('italic', true);\n        break;\n      }\n      case 'u': {\n        event.preventDefault();\n        editor.addMark('underline', true);\n        break;\n      }\n      case 'z': {\n        event.preventDefault();\n        if (event.shiftKey) {\n          editor.redo();\n        } else {\n          editor.undo();\n        }\n        break;\n      }\n      case 'y': {\n        event.preventDefault();\n        editor.redo();\n        break;\n      }\n    }\n  }, [editor]);\n\n  // 添加主题切换处理\n  const handleThemeChange = useCallback((isDark: boolean) => {\n    // 可以在这里添加更多的主题相关逻辑\n    const editorElement = document.querySelector('.editor-content');\n    if (editorElement) {\n      editorElement.classList.toggle('dark', isDark);\n    }\n  }, []);\n\n  return (\n    <div className=\"h-full flex flex-col\">\n      <Slate\n        editor={editor}\n        value={value}\n        onChange={newValue => {\n          setValue(newValue);\n          const count = calculateWordCount(newValue);\n          setWordCount(count);\n        }}\n      >\n        <div className=\"border-b flex items-center justify-between px-4 py-2\">\n          <Toolbar \n            onExport={handleExport} \n            onThemeChange={handleThemeChange}\n          />\n          <div className=\"flex items-center gap-4\">\n            {/* 保存状态指示器 */}\n            <div className=\"text-sm text-gray-500 flex items-center gap-1\">\n              {saveStatus === 'saving' && (\n                <>\n                  <span className=\"material-icons animate-spin text-blue-500\">sync</span>\n                  Saving...\n                </>\n              )}\n              {saveStatus === 'saved' && (\n                <>\n                  <span className=\"material-icons text-green-500\">check</span>\n                  Saved\n                </>\n              )}\n              {saveStatus === 'error' && (\n                <>\n                  <span className=\"material-icons text-red-500\">error</span>\n                  Error saving\n                </>\n              )}\n            </div>\n            {/* 字数统计 */}\n            <div className=\"text-sm text-gray-500\">\n              {wordCount} {wordCount === 1 ? 'character' : 'characters'}\n            </div>\n          </div>\n        </div>\n        <div className=\"flex-1 p-6 overflow-auto editor-content\">\n          <Editable\n            className=\"h-full outline-none prose max-w-none dark:prose-invert\"\n            renderElement={renderElement}\n            renderLeaf={renderLeaf}\n            placeholder=\"Start typing...\"\n            onKeyDown={handleKeyDown}\n            spellCheck={false}\n          />\n        </div>\n      </Slate>\n    </div>\n  );\n};\n\nexport default NoteEditor; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}