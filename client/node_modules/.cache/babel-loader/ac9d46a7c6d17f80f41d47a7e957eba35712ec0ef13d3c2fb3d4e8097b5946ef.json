{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FanYukin\\\\codes\\\\f\\\\noints\\\\client\\\\src\\\\components\\\\Editor\\\\NoteEditor.tsx\",\n  _s = $RefreshSig$();\nimport React, { useMemo, useState, useCallback } from 'react';\nimport { createEditor } from 'slate';\nimport { Slate, Editable, withReact } from 'slate-react';\nimport { withHistory } from 'slate-history';\nimport Toolbar from './Toolbar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NoteEditor = () => {\n  _s();\n  const editor = useMemo(() => withHistory(withReact(createEditor())), []);\n  const [value, setValue] = useState([{\n    type: 'paragraph',\n    children: [{\n      text: ''\n    }]\n  }]);\n\n  // 渲染元素\n  const renderElement = useCallback(props => {\n    const {\n      element,\n      attributes,\n      children\n    } = props;\n    switch (element.type) {\n      case 'bulleted-list':\n        return /*#__PURE__*/_jsxDEV(\"ul\", {\n          ...attributes,\n          children: children\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 16\n        }, this);\n      case 'numbered-list':\n        return /*#__PURE__*/_jsxDEV(\"ol\", {\n          ...attributes,\n          children: children\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          ...attributes,\n          children: children\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 16\n        }, this);\n    }\n  }, []);\n\n  // 渲染叶子节点（文本）\n  const renderLeaf = useCallback(props => {\n    const {\n      attributes,\n      leaf,\n      children\n    } = props;\n    let element = children;\n    if (leaf.bold) {\n      element = /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: element\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }, this);\n    }\n    if (leaf.italic) {\n      element = /*#__PURE__*/_jsxDEV(\"em\", {\n        children: element\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this);\n    }\n    if (leaf.underline) {\n      element = /*#__PURE__*/_jsxDEV(\"u\", {\n        children: element\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      ...attributes,\n      children: element\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 12\n    }, this);\n  }, []);\n\n  // 处理按键事件\n  const handleKeyDown = event => {\n    // 防止默认的浏览器行为\n    if (event.key === 'Enter' && event.shiftKey) {\n      event.preventDefault();\n      editor.insertText('\\n');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-full flex flex-col\",\n    children: /*#__PURE__*/_jsxDEV(Slate, {\n      editor: editor,\n      value: value,\n      onChange: newValue => {\n        setValue(newValue);\n        // 可以在这里添加自动保存逻辑\n      },\n      children: [/*#__PURE__*/_jsxDEV(Toolbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 p-6 overflow-auto\",\n        children: /*#__PURE__*/_jsxDEV(Editable, {\n          className: \"h-full outline-none prose max-w-none\",\n          renderElement: renderElement,\n          renderLeaf: renderLeaf,\n          placeholder: \"Start typing...\",\n          onKeyDown: handleKeyDown,\n          spellCheck: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(NoteEditor, \"Lk4JdXd4p60m+FKbRCjN1X9S1W4=\");\n_c = NoteEditor;\nexport default NoteEditor;\nvar _c;\n$RefreshReg$(_c, \"NoteEditor\");","map":{"version":3,"names":["React","useMemo","useState","useCallback","createEditor","Slate","Editable","withReact","withHistory","Toolbar","jsxDEV","_jsxDEV","NoteEditor","_s","editor","value","setValue","type","children","text","renderElement","props","element","attributes","fileName","_jsxFileName","lineNumber","columnNumber","renderLeaf","leaf","bold","italic","underline","handleKeyDown","event","key","shiftKey","preventDefault","insertText","className","onChange","newValue","placeholder","onKeyDown","spellCheck","_c","$RefreshReg$"],"sources":["C:/Users/FanYukin/codes/f/noints/client/src/components/Editor/NoteEditor.tsx"],"sourcesContent":["import React, { useMemo, useState, useCallback } from 'react';\r\nimport { createEditor, Descendant } from 'slate';\r\nimport { Slate, Editable, withReact } from 'slate-react';\r\nimport { withHistory } from 'slate-history';\r\nimport Toolbar from './Toolbar';\r\nimport { CustomElement, CustomText } from './types';\r\n\r\nconst NoteEditor: React.FC = () => {\r\n  const editor = useMemo(() => withHistory(withReact(createEditor())), []);\r\n  const [value, setValue] = useState<Descendant[]>([\r\n    {\r\n      type: 'paragraph',\r\n      children: [{ text: '' }],\r\n    },\r\n  ]);\r\n\r\n  // 渲染元素\r\n  const renderElement = useCallback((props: {\r\n    element: CustomElement;\r\n    children: React.ReactNode;\r\n    attributes: any;\r\n  }) => {\r\n    const { element, attributes, children } = props;\r\n    switch (element.type) {\r\n      case 'bulleted-list':\r\n        return <ul {...attributes}>{children}</ul>;\r\n      case 'numbered-list':\r\n        return <ol {...attributes}>{children}</ol>;\r\n      default:\r\n        return <p {...attributes}>{children}</p>;\r\n    }\r\n  }, []);\r\n\r\n  // 渲染叶子节点（文本）\r\n  const renderLeaf = useCallback((props: {\r\n    leaf: CustomText;\r\n    children: React.ReactNode;\r\n    attributes: any;\r\n  }) => {\r\n    const { attributes, leaf, children } = props;\r\n    let element = children;\r\n\r\n    if (leaf.bold) {\r\n      element = <strong>{element}</strong>;\r\n    }\r\n    if (leaf.italic) {\r\n      element = <em>{element}</em>;\r\n    }\r\n    if (leaf.underline) {\r\n      element = <u>{element}</u>;\r\n    }\r\n\r\n    return <span {...attributes}>{element}</span>;\r\n  }, []);\r\n\r\n  // 处理按键事件\r\n  const handleKeyDown = (event: React.KeyboardEvent) => {\r\n    // 防止默认的浏览器行为\r\n    if (event.key === 'Enter' && event.shiftKey) {\r\n      event.preventDefault();\r\n      editor.insertText('\\n');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col\">\r\n      <Slate\r\n        editor={editor}\r\n        value={value}\r\n        onChange={newValue => {\r\n          setValue(newValue);\r\n          // 可以在这里添加自动保存逻辑\r\n        }}\r\n      >\r\n        <Toolbar />\r\n        <div className=\"flex-1 p-6 overflow-auto\">\r\n          <Editable\r\n            className=\"h-full outline-none prose max-w-none\"\r\n            renderElement={renderElement}\r\n            renderLeaf={renderLeaf}\r\n            placeholder=\"Start typing...\"\r\n            onKeyDown={handleKeyDown}\r\n            spellCheck={false}\r\n          />\r\n        </div>\r\n      </Slate>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NoteEditor; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}